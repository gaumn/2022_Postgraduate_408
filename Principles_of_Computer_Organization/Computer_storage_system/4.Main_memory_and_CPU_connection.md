# 主存储器与CPU的连接

## 连接原理

+ 主存储器通过数据总线、地址总线和控制总线与CPU连接
+ 数据总线的位数与工作频率的乘积正比于数据传输率
+ 地址总线的位数决定了可寻址的最大内存容量
+ 控制总线(读/写)指出总线周期的类型和本次输入/输出操作完成的时刻。

## 主存容量的扩展

由于单个存储芯片的容量是有限的，它在字数或字长方面与实际存储器 的要求都有差距，因此需要在字和位两方面进行扩充才能满足实际存储器的容量要求。通常采用位扩展法、字扩展法和字位同时扩展法来扩展主存的容量。

### 位扩展法

CPU的数据线数(数据总线)与存储芯片的数据位数不一定相等，此时必须对存储芯片进行扩位(即进行位扩展，用多个存储器件对字长进行扩充，增加存储字长)，使得其数据位数与CPU的数据线数相等。

位扩展的连接方式是将多个存储芯片的地址端、片选端和读写控制端相互并联，数据端分别引出。

[注]：仅采用位扩展时，各芯片连接地址线的方式相同，但连接数据线的方式不同，在某一时刻选中所有的芯片，故片选信号$\overline{CS}$要连接到所有芯片。

### 字扩展法

字扩展是指增加存储器中字的数量，而位数不变。字扩展将芯片的地址线、数据线、读写控制线相应并联，而片选信号来区分各芯片的地址范围。

  [注]：仅采用字扩展时，各芯片连接地址线的方式相同，连接数据线的方式也相同，在某一时刻选中部分的芯片，故通过片选信号$\overline{CS}$或采用译码器设计连接到相应的芯片。                                                                                                                                                                             

### 字位同时扩展法

实际上，存储器往往需要同时扩充字和位。字位同时扩展是指既增加字的数量，也增加存储字长。

[注]：采用字位同时扩展时，各芯片连接地址线的方式相同，但连接数据线的方式不同，而且需要通过片选信号$\overline{CS}$或采用译码器设计连接到相应的芯片。

## 存储芯片的地址分配和片选

CPU要实现对存储单元的访问，首先要选择存储芯片，即进行片选；然后选择的芯片依地址线选择相应的存储单元，以进行数据的存取，即进行字选。片内的字选通常是由CPU送出的N条低地址线完成的，地址线直接接到所有存储芯片的地址输出端(N由片选存储容量2<sup>N</sup>决定)。片选信号的产生分为线选法和译码片选法。

## 线选法

线选法用除片内寻址外的高位地址线直接(或经反相器)分别接至各个存储芯片的片选端，当某地址信息为“0”时，就选中与之对应的存储芯片。这些片选地址线每次寻址时只能有一位有效，不允许同时有多个有效，这样才能保证每次只选中一个芯片(或芯片组)。

优点：不需要地址译码器，线路简单。缺点：地址空间不连续，选片的地址线必须分时为低电平(否则不能工作)，不能充分利用系统的存储空间，造成地址资源的浪费。

### 译码片选法

译码片选法用除片选内寻址外的高地址线通过地址译码器芯片产生片选信号。

## 存储器与CPU的连接

+ 合理选择存储芯片
+ 地址线的连接
+ 数据线的连接
+ 读/写控制线的连接
+ 片选线的连接